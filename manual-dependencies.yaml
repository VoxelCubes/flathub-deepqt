# torch, torchvision, manga-ocr omitted from requirements directly due to cuda interference.
name: manual-dependencies
build-commands: []
buildsystem: simple
modules:
  - name: python3-torch
    buildsystem: simple
    build-commands:
      - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}"
        --prefix=${FLATPAK_DEST} "torch" --no-build-isolation
    sources:
      - type: file
        url: https://download.pytorch.org/whl/cpu-cxx11-abi/torch-2.1.0%2Bcpu.cxx11.abi-cp311-cp311-linux_x86_64.whl
        sha256: 0aafe9ff268e209831d38acd3e0b39a95ae76ff45a88ec0e48d7019cf476dc21
  - name: python3-torchvision
    buildsystem: simple
    build-commands:
      - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}"
        --prefix=${FLATPAK_DEST} "torchvision" --no-build-isolation
    sources:
      - type: file
        url: https://download.pytorch.org/whl/cpu/torchvision-0.16.0%2Bcpu-cp311-cp311-linux_x86_64.whl
        sha256: be317c0b0b32d008309a1de6018e77b500d1cf966e158a5db1070da5c0cfea88
  - name: python3-manga-ocr
    buildsystem: simple
    build-commands:
      - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}"
        --prefix=${FLATPAK_DEST} "manga-ocr" --no-build-isolation
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/08/77/97416057713f3d894da2d052135806f32b929601fda94c72034b753ca07c/manga_ocr-0.1.11-py3-none-any.whl
        sha256: 3e9a0373de1c9e1b6e5a34206ffe7c4c1b5823f2ba456143754e3e722c4b87a9
  # Cross-arch dependencies.
  - name: python3-pyside6
    buildsystem: simple
    build-commands:
      - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}"
        --prefix=${FLATPAK_DEST} "pyside6" --no-build-isolation
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/24/3a/a970808004b16dabdfaf77fa602b43a85c4d8812709a8bae065577283c4c/PySide6-6.6.1-cp38-abi3-manylinux_2_28_x86_64.whl
        sha256: 0a67587c088cb80e90d4ce3023b02466ea858c93a6dc9c4e062b13314e03d464
        only-arches:
          - x86_64
      - type: file
        url: https://files.pythonhosted.org/packages/ec/b8/1f5335580241c3863584173308c842ffc74e05074f3f72b49e5b54ca18e3/PySide6_Addons-6.6.1-cp38-abi3-manylinux_2_28_x86_64.whl
        sha256: a0982da4033319667f9df5ed6fa8eff300a88216aec103a1fff6751a172b19a0
        only-arches:
          - x86_64
      - type: file
        url: https://files.pythonhosted.org/packages/56/65/50d0ced768b717f709a5ab224b648eb533a862efd0cde67d19c2727200b0/PySide6_Essentials-6.6.1-cp38-abi3-manylinux_2_28_x86_64.whl
        sha256: c7185616083eab6f42eaed598d97d49fac4f60ae2e7415194140d54f58c2b42c
        only-arches:
          - x86_64
      - type: file
        url: https://files.pythonhosted.org/packages/bb/72/e54f758e49e8da0dcd9490d006c41a814b0e56898ce4ca054d60cdba97bd/shiboken6-6.6.1-cp38-abi3-manylinux_2_28_x86_64.whl
        sha256: fb102e4bc210006f0cdd0ce38e1aaaaf792bd871f02a2b3f01d07922c5cf4c59
        only-arches:
          - x86_64
      - type: file
        url: https://files.pythonhosted.org/packages/9d/67/84e3676b954106302de04782763d09c3716c65621d76769af209edc0d948/PySide6-6.6.1-cp38-abi3-manylinux_2_31_aarch64.whl
        sha256: ed3822150f0d7a06b68bf4ceebe287515b5e8309bb256e9b49ae405afd062b18
        only-arches:
          - aarch64
      - type: file
        url: https://files.pythonhosted.org/packages/47/f0/334bb65c0bf9ed61df642d10722ddb30562bcf7c3b514bec4e51b32dd6ab/shiboken6-6.6.1-cp38-abi3-manylinux_2_31_aarch64.whl
        sha256: a605960e72af5eef915991cee7eef4cc72f5cabe63b9ae1a955ceb3d3b0a00b9
        only-arches:
          - aarch64
      - type: file
        url: https://files.pythonhosted.org/packages/b6/4a/bd16c3fb1a3e423151dce4d51f70c2df6b5f8337689d8f471a7969c30b2f/PySide6_Addons-6.6.1-cp38-abi3-manylinux_2_31_aarch64.whl
        sha256: 5a63a8a943724ce5acd2df72e5ab04982b6906963278cbabb216656b9a26ee18
        only-arches:
          - aarch64
      - type: file
        url: https://files.pythonhosted.org/packages/73/28/1313720f3e30304b1fd13aab139ec21f30a01f237e70e631663ddad21fd1/PySide6_Essentials-6.6.1-cp38-abi3-manylinux_2_31_aarch64.whl
        sha256: a383c3d60298392cfb621ec1a0cf24b4799321e6c5bbafc021d4cc8076ea1315
        only-arches:
          - aarch64
  - name: python3-numpy
    buildsystem: simple
    build-options:
      env:
        ATLAS: None
        BLAS: "/app/lib"
        LAPACK: "/app/lib"
    build-commands:
      - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}"
        --prefix=${FLATPAK_DEST} "numpy>=1.16.0" --no-build-isolation
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/d0/b0/13e2b50c95bfc1d5ee04925eb5c105726c838f922d0aaddd57b7c8be0f8b/numpy-1.26.3.tar.gz
        sha256: 697df43e2b6310ecc9d95f05d5ef20eacc09c7c4ecc9da3f235d39e71b7da1e4
  - name: python3-pybind11
    buildsystem: simple
    build-commands:
      - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}"
        --prefix=${FLATPAK_DEST} "pybind11" --no-build-isolation
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/06/55/9f73c32dda93fa4f539fafa268f9504e83c489f460c380371d94296126cd/pybind11-2.11.1-py3-none-any.whl
        sha256: 33cdd02a6453380dd71cc70357ce388ad1ee8d32bd0e38fc22b273d050aa29b3
  - name: python3-pythran
    buildsystem: simple
    build-commands:
      - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}"
        --prefix=${FLATPAK_DEST} "pythran" --no-build-isolation
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/cc/4a/af3f1b3d00efd47309b7a0e28351e06453727fa55d9b3a45fd4b91031a63/beniget-0.4.1-py3-none-any.whl
        sha256: cb061256631313f9d06031b824f7f403baecaf609b2d3d14d43f23356cf143f2
      - type: file
        url: https://files.pythonhosted.org/packages/fa/39/5aae571e5a5f4de9c3445dae08a530498e5c53b0e74410eeeb0991c79047/gast-0.5.4-py3-none-any.whl
        sha256: 6fc4fa5fa10b72fb8aab4ae58bcb023058386e67b6fa2e3e34cec5c769360316
      - type: file
        url: https://files.pythonhosted.org/packages/d0/b0/13e2b50c95bfc1d5ee04925eb5c105726c838f922d0aaddd57b7c8be0f8b/numpy-1.26.3.tar.gz
        sha256: 697df43e2b6310ecc9d95f05d5ef20eacc09c7c4ecc9da3f235d39e71b7da1e4
      - type: file
        url: https://files.pythonhosted.org/packages/a3/58/35da89ee790598a0700ea49b2a66594140f44dec458c07e8e3d4979137fc/ply-3.11-py2.py3-none-any.whl
        sha256: '096f9b8350b65ebd2fd1346b12452efe5b9607f7482813ffca50c22722a807ce'
      - type: file
        url: https://files.pythonhosted.org/packages/ee/4b/60484d3210b3d832d8be14513ff3e2539c10a223ab87a57bb4fd21a996a2/pythran-0.14.0-py3-none-any.whl
        sha256: 5a8e9f316a77bfdcdfb81308dbf9bc046638a80ba64a8a608d62c14d67f19704
  - name: python3-meson-python
    buildsystem: simple
    build-commands:
      - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}"
        --prefix=${FLATPAK_DEST} "meson-python" --no-build-isolation
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/1f/60/b10b11ab470a690d5777310d6cfd1c9bdbbb0a1313a78c34a1e82e0b9d27/meson_python-0.15.0-py3-none-any.whl
        sha256: 3ae38253ff02b2e947a05e362a2eaf5a9a09d133c5666b4123399ee5fbf2e591
      - type: file
        url: https://files.pythonhosted.org/packages/ec/1a/610693ac4ee14fcdf2d9bf3c493370e4f2ef7ae2e19217d7a237ff42367d/packaging-23.2-py3-none-any.whl
        sha256: 8c491190033a9af7e1d931d0b5dacc2ef47509b34dd0de67ed209b5203fc88c7
      - type: file
        url: https://files.pythonhosted.org/packages/c4/cb/4678dfd70cd2f2d8969e571cdc1bb1e9293c698f8d1cf428fadcf48d6e9f/pyproject_metadata-0.7.1-py3-none-any.whl
        sha256: 28691fbb36266a819ec56c9fa1ecaf36f879d6944dfde5411e87fc4ff793aa60
  - name: python3-scipy
    buildsystem: simple
    build-options:
      env:
        ATLAS: None
        BLAS: "/app/lib"
        LAPACK: "/app/lib"
    build-commands:
      - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}"
        --prefix=${FLATPAK_DEST} "scipy" --no-build-isolation
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/d0/b0/13e2b50c95bfc1d5ee04925eb5c105726c838f922d0aaddd57b7c8be0f8b/numpy-1.26.3.tar.gz
        sha256: 697df43e2b6310ecc9d95f05d5ef20eacc09c7c4ecc9da3f235d39e71b7da1e4
      - type: file
        url: https://files.pythonhosted.org/packages/6e/1f/91144ba78dccea567a6466262922786ffc97be1e9b06ed9574ef0edc11e1/scipy-1.11.4.tar.gz
        sha256: 90a2b78e7f5733b9de748f589f09225013685f9b218275257f8a8168ededaeaa
  - name: lapack
    buildsystem: cmake-ninja
    builddir: true
    config-opts:
      - -DBUILD_SHARED_LIBS=ON
      - -DBUILD_TESTING=OFF
      - -DLAPACKE=ON
      - -DCBLAS=ON
      - -DCMAKE_Fortran_COMPILER=gfortran
    sources:
      - type: archive
        url: https://github.com/Reference-LAPACK/lapack/archive/refs/tags/v3.12.0.tar.gz
        sha256: eac9570f8e0ad6f30ce4b963f4f033f0f643e7c3912fc9ee6cd99120675ad48b
        x-checker-data:
          type: anitya
          project-id: 1534
          stable-only: true
          url-template: https://github.com/Reference-LAPACK/lapack/archive/refs/tags/v$version.tar.gz
  - name: openblas
    buildsystem: cmake-ninja
    builddir: true
    config-opts:
      - -DBUILD_SHARED_LIBS=ON
      - -DBUILD_TESTING=OFF
      - -DNO_AFFINITY=ON
      - -DUSE_OPENMP=1
      - -DNO_WARMUP=1
      - -DCORE=CORE2
      - -DNUM_THREADS=64
      - -DDYNAMIC_ARCH=ON
    sources:
      - type: archive
        url: https://github.com/xianyi/OpenBLAS/archive/v0.3.26.tar.gz
        sha256: 4e6e4f5cb14c209262e33e6816d70221a2fe49eb69eaf0a06f065598ac602c68
        x-checker-data:
          type: anitya
          project-id: 2540
          url-template: https://github.com/xianyi/OpenBLAS/archive/v$version.tar.gz